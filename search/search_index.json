{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"About Mass Spec Query Language \u00b6 The Mass Spec Query Langauge (MassQL) is a domain specific language meant to be a succinct way to express a query in a mass spectrometry centric fashion. It is inspired by SQL, but it attempts to bake in assumptions of mass spectrometry to make querying much more natural for mass spectrometry users. Broadly we attempt to design it according to several principles: Expressiveness - Capture complex mass spectrometry patterns that the community would like to look for Precision - Exactly prescribe how to find data without ambiguity Relatively Natural - MassQL should be relatively easy to read and write and even use as a way to communicate ideas about mass spectrometry, you know like a language. Why does Mass Spec Query Language Exist? \u00b6 The intrinsic physical and chemical property of molecules when analyzed by mass spectrometry imprint patterns upon mass spectrometry data. This affords the opportunity to formulate queries to find these patterns in raw mass spectrometry data. However, within the computational mass spectrometry ecosystem, the lack of a ergonomic, flexible, and scalable approach to express these patterns prevents the community from taking full advantage of expert knowledge of these patterns to thoroughly and quickly mine mass spectrometry data for new molecules. Therefore, I created the Mass Spectrometry Query Language (MassQL) to empower mass spectrometrists and chemists to write their own queries in a flexible, precise, and scalable fashion. Developers \u00b6 Mingxun Wang is the creator and main developer of MassQL. Please contact me if you have questions! I'm hoping this becomes a community effort so reach out if you want to help/use MassQL. Definition of a Query \u00b6 There are several parts QUERY <Type of Data> WHERE <Condition> AND <Condition> FILTER <Filter> AND <Filter> Type of Data \u00b6 This determines the type of data you want to get. At its most fundamental level, its the peaks for either MS1DATA MS2DATA Further, there are functions that can modify this data scaninfo - This provides likely the most information you'd want for each scan scansum - Summation of the scan (TIC) scannum - Returns the scan number scanmaxint - Returns the max intensity per spectrum (BPI) Experimental Functions scanrangesum scanmaxmz scanrun Conditionals \u00b6 These are conditions to filter for scans of interest (by looking for peaks and sets of peaks) within the mass spectrometry data. You can create clauses, which are specific conditions and the associated qualifiers. You may further combine multiple conditions with AND . AND will indicate that within a specific spectrum, all the conditions must be met. Info The syntax for this is <condition>=<value> , e.g. MS2PROD=144.1 . The types of conditions are as follows RTMIN \u00b6 Setting the minimum retention time in minutes RTMAX \u00b6 Setting the maximum retention time in minutes SCANMIN \u00b6 Setting the minimum scan number (this is inclusive) SCANMAX \u00b6 Setting the maximum scan number (this is inclusive) CHARGE \u00b6 Finding MS2 spectra with a given charge if reported by the instrument POLARITY \u00b6 The polarity that will be chosen. (Positive, Negative) MS2PROD \u00b6 Looking for an MS2 peak MS2PREC \u00b6 Looking for an MS2 precursor m/z MS1MZ \u00b6 Looking for MS1 peak m/z MOBILITY \u00b6 We have a special keyword to interact with mobility data. Specifically, the syntax enables you to set min and max bounds for the mobility MOBILITY=range(min=1, max=2) The units here are whatever your mass spectrometer reports and are not converted to collision cross section (CCS). Fun with m/z variables and Mobility You can even create polygons within the m/z mobility space to get data. Here is a quick example QUERY scaninfo(MS2DATA) WHERE MS2PREC=X AND MOBILITY=range(min=X*0.0011+0.5-0.1, max=X*0.0011+0.5+0.1) This represents approximately this parallelogram region. MS2NL \u00b6 Looking for a neutral loss from precursor m/z in the MS2 spectrum. For example, if a molecule has a precursor m/z of 500, and you are searching for an MS2NL of 16, it will look for a peak appearing at 500 - 16 = 484 m/z. Qualifiers \u00b6 These can be attached to conditions to modify some properties about the peaks we are looking for. Mass Accuracy \u00b6 These two fields enable setting a peak m/z tolerance TOLERANCEMZ=0.1 TOLERANCEPPM=50 Default Values The default tolerance when no qualifier is provided is 0.1 Da. Intensity Relative to Full Spectrum \u00b6 These two fields enable to set an minimum intensity INTENSITYVALUE=1000 INTENSITYPERCENT=10 INTENSITYTICPERCENT=10 INTENSITYVALUE - This indicates a minimum intensity value in terms of arbitrary units. INTENSITYPERCENT - This indicates a minimum percent of maximum peak in the spectrum. INTENSITYTICPERCENT - This indicates a minimum percent of total TIC in the spectra. Default Values The default minimum intensity value is 0, so it will accept any peak. This is generally not what you want, so likely you do want to set this. Intensity Relative to Other Peaks \u00b6 Here we can start imposing relative intensities between peaks INTENSITYMATCHREFERENCE INTENSITYMATCH=Y INTENSITYMATCH=Y*2 INTENSITYMATCHPERCENT=10 Intensity Matching Between Peaks This is actually complicated, but you'll end up with one peak per variable that is the reference and all others are relative to that reference. WHERE MS1MZ=X:INTENSITYMATCH=Y:INTENSITYMATCHREFERENCE # This is the reference peak which all other peaks' intensities will be compared to AND MS1MZ=X+2:INTENSITYMATCH=Y*2:INTENSITYMATCHPERCENT=1 # The Y*2 denotes that it must be 2 times the intensity of the first peak Values of Conditions, Qualifiers \u00b6 As mentioned above, the value of certain conditions can be numbers (more precisely floats). However, its sometimes in convenient to have to actually calculate out the m/z for an MS2PROD condition and also the derivation is obfuscated if its just a single number. You can simply list it out as a numerical expression MS2PROD=100+14 and this will get calculated to mean MS2PROD=114 You can even do more advanced things that are native to chemistry/biochemistry without having to look up numbers, and they are listed below. MS2MZ and MS2PROD synonyms MS2MZ and MS2PROD mean the same thing in the language. ANY keyword \u00b6 If you do not have a specific requirement of a peak m/z, you can use the ANY keyword. For example: MS2PROD=ANY:MASSDEFECT=massdefect(min=0.1, max=0.2) Variables \u00b6 In cases where you do not know the mass of the peaks for a specific pattern, but you know the pattern of peaks relative to each other, e.g. isotopic patterns, you can use the variable X in place. For example: QUERY scaninfo(MS2DATA) WHERE MS2PROD=X and MS2NL=X+16 Limiting Range of X If you want to limit the range you can set another condition, X=range(min=100, max=500) Limiting Mass Defect of X If you want to set limits on the decimal part of X, you can set another condition, X=massdefect(min=0.1, max=0.5) Molecular Formula \u00b6 To save us all a little bit of time convert lookup of formulas into masses, you can use the syntax: MS2PROD=formula(H2O) to easily calcualte the mono isotopic mass of H2O. It will substitute as MS2PROD=18.01056468403 Advanced Usage If you want to make functions out of formula masses, you totally can, like below MS2PROD=100 + formula(CH2)*2 Amino Acid Masses \u00b6 To calculate amino acid masses, you can use the following syntax MS2PROD=100 + aminoaciddelta(G) which will calculate out to MS2PROD=157.02146372057 Multiple Amino Acids If you want to use multiple amino acids, no problem: MS2PROD=aminoaciddelta(GA) Peptide Masses \u00b6 If you're in the proteomics camp, you can automatically calculate peptide fragementation. MS2PROD=peptide(G, charge=1, ion=y) will yield MS2PROD=76.03930487103999 Filters \u00b6 Filters are like conditional but we don't elimate scans based on the condition. Rather, we simply filter out peaks within the spectra. This is useful for things like SRM or SIM/XIC. Misc \u00b6 OR operations \u00b6 If you are looking for two peaks but either of them could be present, you can use the following syntax MS2PROD=(100 OR 104) You can use with variables as well. MassQL Patterns \u00b6 If you're interested in doing some more advanced queries in MassQL, we have a dedicated patterns page to show you ways we've approached some interesting applications. By no means is it comprehensive, but we hope it helps. Check it out here . Examples \u00b6 XIC Generation \u00b6 MS1 XIC, m/z = 100 QUERY scansum(MS1DATA) FILTER MS1MZ=100:TOLERANCEMZ=0.1 MS2 With Sugar Loss - Neutral Loss Scan \u00b6 Neutral Loss, 163 Da QUERY scaninfo(MS2DATA) WHERE MS2NL=163 Brominated Compounds \u00b6 QUERY scaninfo(MS2DATA) WHERE MS1MZ=X:INTENSITYMATCH=Y:INTENSITYMATCHREFERENCE AND MS1MZ=X+2:INTENSITYMATCH=Y:INTENSITYMATCHPERCENT=5 AND MS2PREC=X MS2 with distinct fragment(s) - Precursor Ion Scan \u00b6 One Product Ion, m/z = 660.2 QUERY scaninfo(MS2DATA) WHERE MS2PROD=660.2:TOLERANCEMZ=0.1 Two Product Ions, m/z = 660.2 and 468.2 QUERY scaninfo(MS2DATA) WHERE MS2PROD=660.2:TOLERANCEMZ=0.1 AND MS2PROD=468.2:TOLERANCEMZ=0.1 How To Use MassQL \u00b6 Python API \u00b6 We have a python API that you can utilize in your own software. Checkout the package here on PyPi . R API \u00b6 We have an R implementation by the community, check it out here . Commandline Utility \u00b6 We have a standalone script that can execute queries on spectrum files that can be installed by the package PyPi . Nextflow Workflow \u00b6 We have a nextflow workflow to enable scalable queries across hundreds of thousands of mass spectrometry files. ProteoSAFe Workflow \u00b6 We have a proteosafe workflow that we have created that nicely integrates into GNPS - Try the beta here . See more details here . Workflow Details \u00b6 There are several options that you probably will care about Extracting found MS scans as part of output, default this is off, if you want to do downstream molecular networking - turn this on If you want to run multiple queries together, you can now, just separate your queries with ||| and then results from multiple queries will be merged together GNPS Repository Scale Queries One of the powerful things with MassQL is the ability to scale up to huge amounts of data. Luckily at GNPS we have tons of data. You can use the above workflow to select datasets (or your own), with hundreds of files queriable at once. However, sometimes you want to go really big and search everything at once. We have these tools available but they currently require a large amount of compute and require special permissions. If you want to do repository scale queries, please contact Ming to collaborate on it. PyOpenMS \u00b6 You can checkout how to use MassQL In PyOpenMS here . Web API \u00b6 We have built out a web API for people to use, especially for parsing. https://msql.ucsd.edu/parse?query=QUERY%20MS2DATA%20WHERE%20MS1MZ=100 Simply put in the query as a url encoded parameter and a JSON representation of the parse is returned. Interactive Web Sandbox \u00b6 Checkout the interactive sandbox here . Debugging Your Query \u00b6 I would recommend you check out the interactive sandbox listed above. One of the features here is we try to translate your MassQL query into a visualization and into English. Generally issues with queries run into problems with of misunderstanding what each condition and qualifier mean or setting your requirements a bit too strict. Both the visualization and translation to English helps with that.","title":"MassQL Introduction"},{"location":"#about-mass-spec-query-language","text":"The Mass Spec Query Langauge (MassQL) is a domain specific language meant to be a succinct way to express a query in a mass spectrometry centric fashion. It is inspired by SQL, but it attempts to bake in assumptions of mass spectrometry to make querying much more natural for mass spectrometry users. Broadly we attempt to design it according to several principles: Expressiveness - Capture complex mass spectrometry patterns that the community would like to look for Precision - Exactly prescribe how to find data without ambiguity Relatively Natural - MassQL should be relatively easy to read and write and even use as a way to communicate ideas about mass spectrometry, you know like a language.","title":"About Mass Spec Query Language"},{"location":"#why-does-mass-spec-query-language-exist","text":"The intrinsic physical and chemical property of molecules when analyzed by mass spectrometry imprint patterns upon mass spectrometry data. This affords the opportunity to formulate queries to find these patterns in raw mass spectrometry data. However, within the computational mass spectrometry ecosystem, the lack of a ergonomic, flexible, and scalable approach to express these patterns prevents the community from taking full advantage of expert knowledge of these patterns to thoroughly and quickly mine mass spectrometry data for new molecules. Therefore, I created the Mass Spectrometry Query Language (MassQL) to empower mass spectrometrists and chemists to write their own queries in a flexible, precise, and scalable fashion.","title":"Why does Mass Spec Query Language Exist?"},{"location":"#developers","text":"Mingxun Wang is the creator and main developer of MassQL. Please contact me if you have questions! I'm hoping this becomes a community effort so reach out if you want to help/use MassQL.","title":"Developers"},{"location":"#definition-of-a-query","text":"There are several parts QUERY <Type of Data> WHERE <Condition> AND <Condition> FILTER <Filter> AND <Filter>","title":"Definition of a Query"},{"location":"#type-of-data","text":"This determines the type of data you want to get. At its most fundamental level, its the peaks for either MS1DATA MS2DATA Further, there are functions that can modify this data scaninfo - This provides likely the most information you'd want for each scan scansum - Summation of the scan (TIC) scannum - Returns the scan number scanmaxint - Returns the max intensity per spectrum (BPI) Experimental Functions scanrangesum scanmaxmz scanrun","title":"Type of Data"},{"location":"#conditionals","text":"These are conditions to filter for scans of interest (by looking for peaks and sets of peaks) within the mass spectrometry data. You can create clauses, which are specific conditions and the associated qualifiers. You may further combine multiple conditions with AND . AND will indicate that within a specific spectrum, all the conditions must be met. Info The syntax for this is <condition>=<value> , e.g. MS2PROD=144.1 . The types of conditions are as follows","title":"Conditionals"},{"location":"#rtmin","text":"Setting the minimum retention time in minutes","title":"RTMIN"},{"location":"#rtmax","text":"Setting the maximum retention time in minutes","title":"RTMAX"},{"location":"#scanmin","text":"Setting the minimum scan number (this is inclusive)","title":"SCANMIN"},{"location":"#scanmax","text":"Setting the maximum scan number (this is inclusive)","title":"SCANMAX"},{"location":"#charge","text":"Finding MS2 spectra with a given charge if reported by the instrument","title":"CHARGE"},{"location":"#polarity","text":"The polarity that will be chosen. (Positive, Negative)","title":"POLARITY"},{"location":"#ms2prod","text":"Looking for an MS2 peak","title":"MS2PROD"},{"location":"#ms2prec","text":"Looking for an MS2 precursor m/z","title":"MS2PREC"},{"location":"#ms1mz","text":"Looking for MS1 peak m/z","title":"MS1MZ"},{"location":"#mobility","text":"We have a special keyword to interact with mobility data. Specifically, the syntax enables you to set min and max bounds for the mobility MOBILITY=range(min=1, max=2) The units here are whatever your mass spectrometer reports and are not converted to collision cross section (CCS). Fun with m/z variables and Mobility You can even create polygons within the m/z mobility space to get data. Here is a quick example QUERY scaninfo(MS2DATA) WHERE MS2PREC=X AND MOBILITY=range(min=X*0.0011+0.5-0.1, max=X*0.0011+0.5+0.1) This represents approximately this parallelogram region.","title":"MOBILITY"},{"location":"#ms2nl","text":"Looking for a neutral loss from precursor m/z in the MS2 spectrum. For example, if a molecule has a precursor m/z of 500, and you are searching for an MS2NL of 16, it will look for a peak appearing at 500 - 16 = 484 m/z.","title":"MS2NL"},{"location":"#qualifiers","text":"These can be attached to conditions to modify some properties about the peaks we are looking for.","title":"Qualifiers"},{"location":"#mass-accuracy","text":"These two fields enable setting a peak m/z tolerance TOLERANCEMZ=0.1 TOLERANCEPPM=50 Default Values The default tolerance when no qualifier is provided is 0.1 Da.","title":"Mass Accuracy"},{"location":"#intensity-relative-to-full-spectrum","text":"These two fields enable to set an minimum intensity INTENSITYVALUE=1000 INTENSITYPERCENT=10 INTENSITYTICPERCENT=10 INTENSITYVALUE - This indicates a minimum intensity value in terms of arbitrary units. INTENSITYPERCENT - This indicates a minimum percent of maximum peak in the spectrum. INTENSITYTICPERCENT - This indicates a minimum percent of total TIC in the spectra. Default Values The default minimum intensity value is 0, so it will accept any peak. This is generally not what you want, so likely you do want to set this.","title":"Intensity Relative to Full Spectrum"},{"location":"#intensity-relative-to-other-peaks","text":"Here we can start imposing relative intensities between peaks INTENSITYMATCHREFERENCE INTENSITYMATCH=Y INTENSITYMATCH=Y*2 INTENSITYMATCHPERCENT=10 Intensity Matching Between Peaks This is actually complicated, but you'll end up with one peak per variable that is the reference and all others are relative to that reference. WHERE MS1MZ=X:INTENSITYMATCH=Y:INTENSITYMATCHREFERENCE # This is the reference peak which all other peaks' intensities will be compared to AND MS1MZ=X+2:INTENSITYMATCH=Y*2:INTENSITYMATCHPERCENT=1 # The Y*2 denotes that it must be 2 times the intensity of the first peak","title":"Intensity Relative to Other Peaks"},{"location":"#values-of-conditions-qualifiers","text":"As mentioned above, the value of certain conditions can be numbers (more precisely floats). However, its sometimes in convenient to have to actually calculate out the m/z for an MS2PROD condition and also the derivation is obfuscated if its just a single number. You can simply list it out as a numerical expression MS2PROD=100+14 and this will get calculated to mean MS2PROD=114 You can even do more advanced things that are native to chemistry/biochemistry without having to look up numbers, and they are listed below. MS2MZ and MS2PROD synonyms MS2MZ and MS2PROD mean the same thing in the language.","title":"Values of Conditions, Qualifiers"},{"location":"#any-keyword","text":"If you do not have a specific requirement of a peak m/z, you can use the ANY keyword. For example: MS2PROD=ANY:MASSDEFECT=massdefect(min=0.1, max=0.2)","title":"ANY keyword"},{"location":"#variables","text":"In cases where you do not know the mass of the peaks for a specific pattern, but you know the pattern of peaks relative to each other, e.g. isotopic patterns, you can use the variable X in place. For example: QUERY scaninfo(MS2DATA) WHERE MS2PROD=X and MS2NL=X+16 Limiting Range of X If you want to limit the range you can set another condition, X=range(min=100, max=500) Limiting Mass Defect of X If you want to set limits on the decimal part of X, you can set another condition, X=massdefect(min=0.1, max=0.5)","title":"Variables"},{"location":"#molecular-formula","text":"To save us all a little bit of time convert lookup of formulas into masses, you can use the syntax: MS2PROD=formula(H2O) to easily calcualte the mono isotopic mass of H2O. It will substitute as MS2PROD=18.01056468403 Advanced Usage If you want to make functions out of formula masses, you totally can, like below MS2PROD=100 + formula(CH2)*2","title":"Molecular Formula"},{"location":"#amino-acid-masses","text":"To calculate amino acid masses, you can use the following syntax MS2PROD=100 + aminoaciddelta(G) which will calculate out to MS2PROD=157.02146372057 Multiple Amino Acids If you want to use multiple amino acids, no problem: MS2PROD=aminoaciddelta(GA)","title":"Amino Acid Masses"},{"location":"#peptide-masses","text":"If you're in the proteomics camp, you can automatically calculate peptide fragementation. MS2PROD=peptide(G, charge=1, ion=y) will yield MS2PROD=76.03930487103999","title":"Peptide Masses"},{"location":"#filters","text":"Filters are like conditional but we don't elimate scans based on the condition. Rather, we simply filter out peaks within the spectra. This is useful for things like SRM or SIM/XIC.","title":"Filters"},{"location":"#misc","text":"","title":"Misc"},{"location":"#or-operations","text":"If you are looking for two peaks but either of them could be present, you can use the following syntax MS2PROD=(100 OR 104) You can use with variables as well.","title":"OR operations"},{"location":"#massql-patterns","text":"If you're interested in doing some more advanced queries in MassQL, we have a dedicated patterns page to show you ways we've approached some interesting applications. By no means is it comprehensive, but we hope it helps. Check it out here .","title":"MassQL Patterns"},{"location":"#examples","text":"","title":"Examples"},{"location":"#xic-generation","text":"MS1 XIC, m/z = 100 QUERY scansum(MS1DATA) FILTER MS1MZ=100:TOLERANCEMZ=0.1","title":"XIC Generation"},{"location":"#ms2-with-sugar-loss-neutral-loss-scan","text":"Neutral Loss, 163 Da QUERY scaninfo(MS2DATA) WHERE MS2NL=163","title":"MS2 With Sugar Loss - Neutral Loss Scan"},{"location":"#brominated-compounds","text":"QUERY scaninfo(MS2DATA) WHERE MS1MZ=X:INTENSITYMATCH=Y:INTENSITYMATCHREFERENCE AND MS1MZ=X+2:INTENSITYMATCH=Y:INTENSITYMATCHPERCENT=5 AND MS2PREC=X","title":"Brominated Compounds"},{"location":"#ms2-with-distinct-fragments-precursor-ion-scan","text":"One Product Ion, m/z = 660.2 QUERY scaninfo(MS2DATA) WHERE MS2PROD=660.2:TOLERANCEMZ=0.1 Two Product Ions, m/z = 660.2 and 468.2 QUERY scaninfo(MS2DATA) WHERE MS2PROD=660.2:TOLERANCEMZ=0.1 AND MS2PROD=468.2:TOLERANCEMZ=0.1","title":"MS2 with distinct fragment(s) - Precursor Ion Scan"},{"location":"#how-to-use-massql","text":"","title":"How To Use MassQL"},{"location":"#python-api","text":"We have a python API that you can utilize in your own software. Checkout the package here on PyPi .","title":"Python API"},{"location":"#r-api","text":"We have an R implementation by the community, check it out here .","title":"R API"},{"location":"#commandline-utility","text":"We have a standalone script that can execute queries on spectrum files that can be installed by the package PyPi .","title":"Commandline Utility"},{"location":"#nextflow-workflow","text":"We have a nextflow workflow to enable scalable queries across hundreds of thousands of mass spectrometry files.","title":"Nextflow Workflow"},{"location":"#proteosafe-workflow","text":"We have a proteosafe workflow that we have created that nicely integrates into GNPS - Try the beta here . See more details here .","title":"ProteoSAFe Workflow"},{"location":"#workflow-details","text":"There are several options that you probably will care about Extracting found MS scans as part of output, default this is off, if you want to do downstream molecular networking - turn this on If you want to run multiple queries together, you can now, just separate your queries with ||| and then results from multiple queries will be merged together GNPS Repository Scale Queries One of the powerful things with MassQL is the ability to scale up to huge amounts of data. Luckily at GNPS we have tons of data. You can use the above workflow to select datasets (or your own), with hundreds of files queriable at once. However, sometimes you want to go really big and search everything at once. We have these tools available but they currently require a large amount of compute and require special permissions. If you want to do repository scale queries, please contact Ming to collaborate on it.","title":"Workflow Details"},{"location":"#pyopenms","text":"You can checkout how to use MassQL In PyOpenMS here .","title":"PyOpenMS"},{"location":"#web-api","text":"We have built out a web API for people to use, especially for parsing. https://msql.ucsd.edu/parse?query=QUERY%20MS2DATA%20WHERE%20MS1MZ=100 Simply put in the query as a url encoded parameter and a JSON representation of the parse is returned.","title":"Web API"},{"location":"#interactive-web-sandbox","text":"Checkout the interactive sandbox here .","title":"Interactive Web Sandbox"},{"location":"#debugging-your-query","text":"I would recommend you check out the interactive sandbox listed above. One of the features here is we try to translate your MassQL query into a visualization and into English. Generally issues with queries run into problems with of misunderstanding what each condition and qualifier mean or setting your requirements a bit too strict. Both the visualization and translation to English helps with that.","title":"Debugging Your Query"},{"location":"gnps/","text":"GNPS MassQL Workflow \u00b6 You can execute your MassQL queries against your own data or public data at GNPS in a highthroughput fashion. Whether its one file or 250K, its possible at GNPS. Check out the workflow here . Input Parameters \u00b6 Query Spectrum Files Paralleize within a single file - ignore this Parallelize Across All Files - To increase a little bit of speed if you have multiple files, turn to Yes Extract Found MS Spectra - if you want to extract the found MS spectra for networking Parallelize across the Cluster - admin only Query \u00b6 Enter your query in this field. You can simply paste one in or write it here. Multiple Queries If you want to run multiple queries you can separate each query with ||| and all results are merged together Results Views \u00b6 Query Results \u00b6 You can see all query results. Extraction Results \u00b6 If you selected the extraction, then you can view the extracted spectra in case its not possible to view the spectra from the original query data. Molecular Networking \u00b6 You can take the extracted data and create a molecular network. Falcon Clustering \u00b6 You can take the extracted data and cluster the data with Falcon to create a molecular network downstream. Generally, Falcon performs better at clustering when reducing redundancy of the same precursor. Library Search \u00b6 You can take the extracted data and search the library. Troubleshooting \u00b6 If you don't get any results, go ahead and check the \"Workflow Trace\" to make sure its not all failed. Checkout the interactive app to try out your query on GNPS Libraries Examples \u00b6 Sanity Test \u00b6 Link Iron Siderophore \u00b6 Link","title":"MassQL GNPS Workflow"},{"location":"gnps/#gnps-massql-workflow","text":"You can execute your MassQL queries against your own data or public data at GNPS in a highthroughput fashion. Whether its one file or 250K, its possible at GNPS. Check out the workflow here .","title":"GNPS MassQL Workflow"},{"location":"gnps/#input-parameters","text":"Query Spectrum Files Paralleize within a single file - ignore this Parallelize Across All Files - To increase a little bit of speed if you have multiple files, turn to Yes Extract Found MS Spectra - if you want to extract the found MS spectra for networking Parallelize across the Cluster - admin only","title":"Input Parameters"},{"location":"gnps/#query","text":"Enter your query in this field. You can simply paste one in or write it here. Multiple Queries If you want to run multiple queries you can separate each query with ||| and all results are merged together","title":"Query"},{"location":"gnps/#results-views","text":"","title":"Results Views"},{"location":"gnps/#query-results","text":"You can see all query results.","title":"Query Results"},{"location":"gnps/#extraction-results","text":"If you selected the extraction, then you can view the extracted spectra in case its not possible to view the spectra from the original query data.","title":"Extraction Results"},{"location":"gnps/#molecular-networking","text":"You can take the extracted data and create a molecular network.","title":"Molecular Networking"},{"location":"gnps/#falcon-clustering","text":"You can take the extracted data and cluster the data with Falcon to create a molecular network downstream. Generally, Falcon performs better at clustering when reducing redundancy of the same precursor.","title":"Falcon Clustering"},{"location":"gnps/#library-search","text":"You can take the extracted data and search the library.","title":"Library Search"},{"location":"gnps/#troubleshooting","text":"If you don't get any results, go ahead and check the \"Workflow Trace\" to make sure its not all failed. Checkout the interactive app to try out your query on GNPS Libraries","title":"Troubleshooting"},{"location":"gnps/#examples","text":"","title":"Examples"},{"location":"gnps/#sanity-test","text":"Link","title":"Sanity Test"},{"location":"gnps/#iron-siderophore","text":"Link","title":"Iron Siderophore"},{"location":"patterns/","text":"This page includes common patterns that you might want to query for in mass spec data Query Mass Spectrometry Data \u00b6 MS1 precursor ion/s based on monoisotopic mass with absolute mass error \u00b6 Finding MS1 peak at m/z 256.1696 with a 0.01 m/z tolerance. QUERY scaninfo(MS1DATA) WHERE MS1MZ=256.1696:TOLERANCEMZ=0.01 MS1 precursor ion/s based on monoisotopic mass with relative mass error \u00b6 Finding MS1 peak at m/z 256.1696 with a 5.0 ppm tolerance. QUERY scaninfo(MS1DATA) WHERE MS1MZ=256.1696:TOLERANCEPPM=5 MS1 precursor ion/s based on monoisotopic mass and isotope mass with relative mass error \u00b6 Finding MS1 peak at m/z 256.1696 Finding MS1 peak at m/z 258.1656 with a 5.0 PPM tolerance. *example: monoisotopic mass + 1.996 for 34S QUERY scaninfo(MS1DATA) WHERE MS1MZ=256.1696 AND MS1MZ=258.1656:TOLERANCEPPM=5 MS1 precursor ion/s with 34S isotope pattern \u00b6 Finding MS1 peak at m/z X. Finding MS1 peak at m/z X+1.996 with a 5.0 PPM tolerance. QUERY scaninfo(MS1DATA) WHERE MS1MZ=X AND MS1MZ=X+1.996:TOLERANCEPPM=5 MS2 spectrum with product ion with absolute mass error \u00b6 Finding MS2 peak at m/z 167.0857 with a 0.01 m/z tolerance. QUERY scaninfo(MS2DATA) WHERE MS2PROD=167.0857:TOLERANCEMZ=0.01 MS2 spectrum with product ion with relative mass error \u00b6 Finding MS2 peak at m/z 167.0857 with a 5.0 ppm tolerance. QUERY scaninfo(MS2DATA) WHERE MS2PROD=167.0857:TOLERANCEPPM=5 MS2 spectrum with a neutral loss and product ion with relative mass error \u00b6 Finding MS2 neutral loss peak at m/z 176.0321. Finding MS2 peak at m/z 85.02915 a 5.0 PPM tolerance. QUERY scaninfo(MS2DATA) WHERE MS2NL=176.0321 AND MS2PROD=85.02915:TOLERANCEPPM=5 MS1 scan associated with MS2 spectrum containing a product ion with absolute mass error \u00b6 Finding MS1 scan associated with MS2 spectrum - relevant to data-dependent acquisition experiments QUERY MS1DATA WHERE MS2PROD=167.0857:TOLERANCEPPM=5 Query Liquid/Gas Chromatography - Mass Spectrometry Data \u00b6 Total ion chromatogram \u00b6 Returning the summed scan information on MS1. QUERY scansum(MS1DATA) Extracted ion chromatogram \u00b6 QUERY scansum(MS1DATA) FILTER MS1MZ=256.1696:TOLERANCEPPM=5 MS2 spectra with a given MS1 isotopic pattern \u00b6 If you're looking for molecules with an isotopic pattern and want to get the MS2 spectra associated with it, we have a pretty easy way to do this. Since you're looking for a variable m/z denoted as X, once you find it, simply enforce the MS2 precursor m/z to also be X. Note This will cause isotopic patterns that lack MS2 to be dropped Here is a quick example of a query QUERY scaninfo(MS2DATA) WHERE MS1MZ=X AND MS1MZ=X+1 AND MS2PREC=X Dynamic Shapes With Mobility \u00b6 If you're looking for certain mobility of molecules that is dependent upon the m/z of the molecule, you can start including variables in the mobility range function. QUERY scaninfo(MS2DATA) WHERE MS2PREC=X AND MOBILITY=range(min=X*0.0011+0.5-0.1, max=X*0.0011+0.5+0.1","title":"MassQL Patterns"},{"location":"patterns/#query-mass-spectrometry-data","text":"","title":"Query Mass Spectrometry Data"},{"location":"patterns/#ms1-precursor-ions-based-on-monoisotopic-mass-with-absolute-mass-error","text":"Finding MS1 peak at m/z 256.1696 with a 0.01 m/z tolerance. QUERY scaninfo(MS1DATA) WHERE MS1MZ=256.1696:TOLERANCEMZ=0.01","title":"MS1 precursor ion/s based on monoisotopic mass with absolute mass error"},{"location":"patterns/#ms1-precursor-ions-based-on-monoisotopic-mass-with-relative-mass-error","text":"Finding MS1 peak at m/z 256.1696 with a 5.0 ppm tolerance. QUERY scaninfo(MS1DATA) WHERE MS1MZ=256.1696:TOLERANCEPPM=5","title":"MS1 precursor ion/s based on monoisotopic mass with relative mass error"},{"location":"patterns/#ms1-precursor-ions-based-on-monoisotopic-mass-and-isotope-mass-with-relative-mass-error","text":"Finding MS1 peak at m/z 256.1696 Finding MS1 peak at m/z 258.1656 with a 5.0 PPM tolerance. *example: monoisotopic mass + 1.996 for 34S QUERY scaninfo(MS1DATA) WHERE MS1MZ=256.1696 AND MS1MZ=258.1656:TOLERANCEPPM=5","title":"MS1 precursor ion/s based on monoisotopic mass and isotope mass with relative mass error"},{"location":"patterns/#ms1-precursor-ions-with-34s-isotope-pattern","text":"Finding MS1 peak at m/z X. Finding MS1 peak at m/z X+1.996 with a 5.0 PPM tolerance. QUERY scaninfo(MS1DATA) WHERE MS1MZ=X AND MS1MZ=X+1.996:TOLERANCEPPM=5","title":"MS1 precursor ion/s with 34S isotope pattern"},{"location":"patterns/#ms2-spectrum-with-product-ion-with-absolute-mass-error","text":"Finding MS2 peak at m/z 167.0857 with a 0.01 m/z tolerance. QUERY scaninfo(MS2DATA) WHERE MS2PROD=167.0857:TOLERANCEMZ=0.01","title":"MS2 spectrum with product ion with absolute mass error"},{"location":"patterns/#ms2-spectrum-with-product-ion-with-relative-mass-error","text":"Finding MS2 peak at m/z 167.0857 with a 5.0 ppm tolerance. QUERY scaninfo(MS2DATA) WHERE MS2PROD=167.0857:TOLERANCEPPM=5","title":"MS2 spectrum with product ion with relative mass error"},{"location":"patterns/#ms2-spectrum-with-a-neutral-loss-and-product-ion-with-relative-mass-error","text":"Finding MS2 neutral loss peak at m/z 176.0321. Finding MS2 peak at m/z 85.02915 a 5.0 PPM tolerance. QUERY scaninfo(MS2DATA) WHERE MS2NL=176.0321 AND MS2PROD=85.02915:TOLERANCEPPM=5","title":"MS2 spectrum with a neutral loss and product ion with relative mass error"},{"location":"patterns/#ms1-scan-associated-with-ms2-spectrum-containing-a-product-ion-with-absolute-mass-error","text":"Finding MS1 scan associated with MS2 spectrum - relevant to data-dependent acquisition experiments QUERY MS1DATA WHERE MS2PROD=167.0857:TOLERANCEPPM=5","title":"MS1 scan associated with MS2 spectrum containing a product ion with absolute mass error"},{"location":"patterns/#query-liquidgas-chromatography-mass-spectrometry-data","text":"","title":"Query Liquid/Gas Chromatography - Mass Spectrometry Data"},{"location":"patterns/#total-ion-chromatogram","text":"Returning the summed scan information on MS1. QUERY scansum(MS1DATA)","title":"Total ion chromatogram"},{"location":"patterns/#extracted-ion-chromatogram","text":"QUERY scansum(MS1DATA) FILTER MS1MZ=256.1696:TOLERANCEPPM=5","title":"Extracted ion chromatogram"},{"location":"patterns/#ms2-spectra-with-a-given-ms1-isotopic-pattern","text":"If you're looking for molecules with an isotopic pattern and want to get the MS2 spectra associated with it, we have a pretty easy way to do this. Since you're looking for a variable m/z denoted as X, once you find it, simply enforce the MS2 precursor m/z to also be X. Note This will cause isotopic patterns that lack MS2 to be dropped Here is a quick example of a query QUERY scaninfo(MS2DATA) WHERE MS1MZ=X AND MS1MZ=X+1 AND MS2PREC=X","title":"MS2 spectra with a given MS1 isotopic pattern"},{"location":"patterns/#dynamic-shapes-with-mobility","text":"If you're looking for certain mobility of molecules that is dependent upon the m/z of the molecule, you can start including variables in the mobility range function. QUERY scaninfo(MS2DATA) WHERE MS2PREC=X AND MOBILITY=range(min=X*0.0011+0.5-0.1, max=X*0.0011+0.5+0.1","title":"Dynamic Shapes With Mobility"},{"location":"visualizer/","text":"MassQL has a visualizer to help you figure out what your query is looking for. It is available at our sandbox . The following will describe what the shapes and symbols mean: MS Peak Mass \u00b6 This can be either MS2PROD or MS1MZ, green boxes around where the allowble m/z tolerance determined by qualifiers is set. MS2 Neutral Loss \u00b6 These are MS2NL keywords and are shown as red boxes. Peak Intensity Minimum \u00b6 This is a red dashed line, with a small red arrow indicating it is a minimum. Peak Intensity Match \u00b6 The ranges are purple dashed lines with arrows denoting the included rage. Variables \u00b6 You can set the variables you want with Value X and Value Y Overlaying Real Data \u00b6 If you enter the USI (universal spectrum identifier) for the MS1 or MS2 spectra, you can overlay your query with an actual spectrum to workshop what you're trying to find.","title":"MassQL Query Visualizer"},{"location":"visualizer/#ms-peak-mass","text":"This can be either MS2PROD or MS1MZ, green boxes around where the allowble m/z tolerance determined by qualifiers is set.","title":"MS Peak Mass"},{"location":"visualizer/#ms2-neutral-loss","text":"These are MS2NL keywords and are shown as red boxes.","title":"MS2 Neutral Loss"},{"location":"visualizer/#peak-intensity-minimum","text":"This is a red dashed line, with a small red arrow indicating it is a minimum.","title":"Peak Intensity Minimum"},{"location":"visualizer/#peak-intensity-match","text":"The ranges are purple dashed lines with arrows denoting the included rage.","title":"Peak Intensity Match"},{"location":"visualizer/#variables","text":"You can set the variables you want with Value X and Value Y","title":"Variables"},{"location":"visualizer/#overlaying-real-data","text":"If you enter the USI (universal spectrum identifier) for the MS1 or MS2 spectra, you can overlay your query with an actual spectrum to workshop what you're trying to find.","title":"Overlaying Real Data"}]}